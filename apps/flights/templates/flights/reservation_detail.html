{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8">
            <h2>항공권 예약 디테일</h2>
            <div class="reservation-details">
                <h3>예약 정보</h3>
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th>예약 날짜</th>
                            <td>{{ reservation.reservation_date }}</td>
                        </tr>
                        <tr>
                            <th>예약자 성함</th>
                            <td>{{ booker_info.name }}</td>
                        </tr>
                        <tr>
                            <th>전화번호</th>
                            <td>{{ booker_info.phone_number }}</td>
                        </tr>
                        <tr>
                            <th>이메일</th>
                            <td>{{ booker_info.email }}</td>
                        </tr>
                    </tbody>
                </table>

                <h3>가는편 정보</h3>
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th>출발 공항</th>
                            <td>{{ reservation.departure_airport }}</td>
                        </tr>
                        <tr>
                            <th>도착 공항</th>
                            <td>{{ reservation.arrival_airport }}</td>
                        </tr>
                        <tr>
                            <th>출발 시간</th>
                            <td>{{ reservation.departure_time }}</td>
                        </tr>
                        <tr>
                            <th>도착 시간</th>
                            <td>{{ reservation.arrival_time }}</td>
                        </tr>
                        <tr>
                            <th>항공편 번호</th>
                            <td>{{ reservation.flight_number }}</td>
                        </tr>
                        <tr>
                            <th>항공사 코드</th>
                            <td>{{ reservation.airline_code }}</td>
                        </tr>
                        <tr>
                            <th>항공편 이름</th>
                            <td>{{ reservation.flight_name }}</td>
                        </tr>
                        <tr>
                            <th>무료 수하물 허용량</th>
                            <td>{{ reservation.free_baggage_allowance }}kg</td>
                        </tr>
                    </tbody>
                </table>

                {% if reservation.return_departure_airport %}
                <h3>오는편 정보</h3>
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th>출발 공항</th>
                            <td>{{ reservation.return_departure_airport }}</td>
                        </tr>
                        <tr>
                            <th>도착 공항</th>
                            <td>{{ reservation.return_arrival_airport }}</td>
                        </tr>
                        <tr>
                            <th>출발 시간</th>
                            <td>{{ reservation.return_depature_time }}</td>
                        </tr>
                        <tr>
                            <th>도착 시간</th>
                            <td>{{ reservation.return_arrival_time }}</td>
                        </tr>
                        <tr>
                            <th>항공편 번호</th>
                            <td>{{ reservation.return_flight_number }}</td>
                        </tr>
                        <tr>
                            <th>항공사 코드</th>
                            <td>{{ reservation.return_airline_code }}</td>
                        </tr>
                        <tr>
                            <th>항공편 이름</th>
                            <td>{{ reservation.return_flight_name }}</td>
                        </tr>
                        <tr>
                            <th>무료 수하물 허용량</th>
                            <td>{{ reservation.return_free_baggage_allowance }}kg</td>
                        </tr>
                    </tbody>
                </table>
                {% endif %}

                <h3>탑승객 정보</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>성</th>
                            <th>이름</th>
                            <th>성별</th>
                            <th>국적</th>
                            <th>갈때 가격</th>
                            <th>올때 가격</th>
                            <th>연령 구분</th>
                            <th>생년월일</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for passenger in passenger_infos %}
                        <tr>
                            <td>{{ passenger.last_name }}</td>
                            <td>{{ passenger.first_name }}</td>
                            <td>{{ passenger.gender }}</td>
                            <td>{{ passenger.nationality }}</td>
                            <td>{{ passenger.one_way_price }}</td>
                            <td>{{ passenger.return_price }}</td>
                            <td>{{ passenger.age_category }}</td>
                            <td>{{ passenger.birth_date }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4">
            <div class="payment-section">
                <h3>결제하기</h3>
                <p>총 금액: ₩{{ total_price }}</p>
                <a href="#" class="btn btn-primary btn-block">결제하기</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
